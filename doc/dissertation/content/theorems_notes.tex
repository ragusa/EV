%==============================================================================
% Theorem environments for personal notes
%==============================================================================
\usepackage[most]{tcolorbox}
\usepackage{ifthen}

\makeatletter

% environment for theorems
\newtcolorbox[auto counter,number within=section]{colortheorem}[2][]{
breakable,
enhanced,
colback=blue!05,
colframe=blue,
top=\baselineskip,
enlarge top by=\topsep,
overlay unbroken and first={
  \node[xshift=10pt,thick,draw=blue,fill=blue!15,rounded corners,anchor=west] at (frame.north west) %
  {\strut{\bfseries Theorem~\thetcbcounter}\if#2\@empty\relax\relax\else~(#2)\fi};
  },
#1
}

% environment for lemmas
\newtcolorbox[auto counter,number within=section]{colorlemma}[2][]{
breakable,
enhanced,
colback=green!05,
colframe=green!90!black,
top=\baselineskip,
enlarge top by=\topsep,
overlay unbroken and first={
  \node[xshift=10pt,thick,draw=green!90!black,fill=green!20,rounded corners,anchor=west] at (frame.north west) %
  {\strut{\bfseries Lemma~\thetcbcounter}\if#2\@empty\relax\relax\else~(#2)\fi};
  },
#1
}

% environment for Corollaries
\newtcolorbox[auto counter,number within=section]{colorcorollary}[2][]{
breakable,
enhanced,
colback=red!05,
colframe=red!90!black,
top=\baselineskip,
enlarge top by=\topsep,
overlay unbroken and first={
  \node[xshift=10pt,thick,draw=red!90!black,fill=red!20,rounded corners,anchor=west] at (frame.north west) %
  {\strut{\bfseries Corollary~\thetcbcounter}\if#2\@empty\relax\relax\else~(#2)\fi};
  },
#1
}

% environment for Definitions
\newtcolorbox[auto counter,number within=section]{colordefinition}[2][]{
breakable,
enhanced,
colback=orange!05,
colframe=orange!90!black,
top=\baselineskip,
enlarge top by=\topsep,
overlay unbroken and first={
  \node[xshift=10pt,thick,draw=orange!90!black,fill=orange!20,rounded corners,anchor=west] at (frame.north west) %
  {\strut{\bfseries Definition~\thetcbcounter}\if#2\@empty\relax\relax\else~(#2)\fi};
  },
#1
}

% environment for Propositions
\newtcolorbox[auto counter,number within=section]{colorproposition}[2][]{
breakable,
enhanced,
colback=black!05,
colframe=black!90,
top=\baselineskip,
enlarge top by=\topsep,
overlay unbroken and first={
  \node[xshift=10pt,thick,draw=black!90,fill=black!20,rounded corners,anchor=west] at (frame.north west) %
  {\strut{\bfseries Proposition~\thetcbcounter}\if#2\@empty\relax\relax\else~(#2)\fi};
  },
#1
}

\makeatother

% create standard environments for each theorem environment
\newenvironment{theorem}[2][]
   {\ifthenelse{\equal{#1}{}}{\begin{colortheorem}{#2}}
   {\begin{colortheorem}[label={#1}]{#2}}}
   {\end{colortheorem}}
\newenvironment{lemma}[2][]
   {\ifthenelse{\equal{#1}{}}{\begin{colorlemma}{#2}}
   {\begin{colorlemma}[label={#1}]{#2}}}
   {\end{colorlemma}}
\newenvironment{corollary}[2][]
   {\ifthenelse{\equal{#1}{}}{\begin{colorcorollary}{#2}}
   {\begin{colorcorollary}[label={#1}]{#2}}}
   {\end{colorcorollary}}
\newenvironment{definition}[2][]
   {\ifthenelse{\equal{#1}{}}{\begin{colordefinition}{#2}}
   {\begin{colordefinition}[label={#1}]{#2}}}
   {\end{colordefinition}}
\newenvironment{proposition}[2][]
   {\ifthenelse{\equal{#1}{}}{\begin{colorproposition}{#2}}
   {\begin{colorproposition}[label={#1}]{#2}}}
   {\end{colorproposition}}

